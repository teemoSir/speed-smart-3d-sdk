const _0x33b6=['972293UEyTUO','createPickIds','737TEQEkt','fromCache','Pass','TRANSLUCENT','removeWaterPlane','LESS_OR_EQUAL','selectedColor','vertexArray','583Gqywcn','colorCommand','4058blekXl','VertexArray','fresnelPower','length','waterIndex','106pEoGiR','drawingBufferHeight','vertexBufferToCreate','pickInfo','reflectFramebuffer','bTransparentSorting','create','OPAQUE','updateBatchTableAttributes','initLayerSetting','BoundingSphere','clone','vertexAttributes','RenderState','context','51xudFKc','drawingBufferWidth','primitiveType','noiseScale','createBuffers','modelMatrix','sceneFramebuffer','_clipMode','instanceCount','295352BfGttO','ALPHA_BLEND','isDestroyed','minFresnel','addWaterPlane','ready','boundingVolume','shaderProgramToCreate','scale','commandList','fillForeColor','_swipeRegion','uniformMap','createShaderProgram','DrawCommand','indexBuffer','shaderProgram','batchTable','selectionInfoMap','destroyObject','style3D','439SXgLGT','batchTableDirty','arrIndexPackage','indexBufferToCreate','Cartesian4','DepthFunction','prototype','62598EgCXlT','createCommand','BlendingState','13LwiRpX','bReflect','waterTime','_waterParameters','destroy','scroll','geoMatrix','25846yUhgdu','getUniformMapCallback','bottomAltitude','waterColour','camera','defaultTexture','layer','push','bumpSpeed','material'];const _0x296303=_0x4e8c;(function(_0x163919,_0xd15de4){const _0x283241=_0x4e8c;while(!![]){try{const _0x1b3b66=-parseInt(_0x283241(0x1db))+parseInt(_0x283241(0x1f1))*parseInt(_0x283241(0x20f))+parseInt(_0x283241(0x200))*-parseInt(_0x283241(0x1fb))+parseInt(_0x283241(0x1bf))+parseInt(_0x283241(0x1de))*-parseInt(_0x283241(0x1e5))+-parseInt(_0x283241(0x1d4))*parseInt(_0x283241(0x1f9))+parseInt(_0x283241(0x1ef));if(_0x1b3b66===_0xd15de4)break;else _0x163919['push'](_0x163919['shift']());}catch(_0x24dac8){_0x163919['push'](_0x163919['shift']());}}}(_0x33b6,0x35d87));import _0x107fa8 from'../Shaders/FresnelVp.js';import _0x1e69ed from'../Shaders/FresnelFp.js';import _0x62695f from'./RenderEntity.js';function _0x4e8c(_0x582e8b,_0x1a1538){_0x582e8b=_0x582e8b-0x1bf;let _0x33b666=_0x33b6[_0x582e8b];return _0x33b666;}function S3MWaterRenderEntity(_0x22ed42){_0x62695f['call'](this,_0x22ed42),this['vs']=_0x107fa8,this['fs']=_0x1e69ed,this['waterIndex']=-0x1,this['waterTime']=0x0;}S3MWaterRenderEntity['prototype']=Object[_0x296303(0x206)](_0x62695f[_0x296303(0x1da)]),S3MWaterRenderEntity[_0x296303(0x1da)]['constructor']=_0x62695f;function getOpaqueRenderState(){const _0x2a9aba=_0x296303;return Cesium[_0x2a9aba(0x20d)][_0x2a9aba(0x1f2)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium[_0x2a9aba(0x1d9)][_0x2a9aba(0x1f6)]},'blending':Cesium[_0x2a9aba(0x1dd)][_0x2a9aba(0x1c0)]});}let swipRegionScratch=new Cesium[(_0x296303(0x1d8))]();function getUniformMap(_0x359a65,_0x10d5be,_0x2cb172){return{'uGeoMatrix':function(){const _0x1dccfa=_0x4e8c;return _0x2cb172[_0x1dccfa(0x1e4)];},'uFillForeColor':function(){const _0x3bd96f=_0x4e8c;return _0x10d5be[_0x3bd96f(0x1d3)][_0x3bd96f(0x1c9)];},'uSelectedColor':function(){const _0x3be8bb=_0x4e8c;return _0x10d5be[_0x3be8bb(0x1f7)];},'uClipMode':function(){const _0x3f4ac9=_0x4e8c;return _0x10d5be[_0x3f4ac9(0x216)];},'uClipPlanes':function(){return _0x10d5be['_clipPlane'];},'uSwipeRegion':function(){const _0x212a82=_0x4e8c,_0x520df3=_0x10d5be[_0x212a82(0x20e)];return swipRegionScratch['x']=_0x10d5be[_0x212a82(0x1ca)]['x']*_0x520df3[_0x212a82(0x210)],swipRegionScratch['y']=(0x1-_0x10d5be[_0x212a82(0x1ca)]['y'])*_0x520df3[_0x212a82(0x201)],swipRegionScratch['z']=_0x10d5be[_0x212a82(0x1ca)]['z']*_0x520df3['drawingBufferWidth'],swipRegionScratch['w']=(0x1-_0x10d5be[_0x212a82(0x1ca)]['w'])*_0x520df3[_0x212a82(0x201)],swipRegionScratch;},'uReflectMap':function(){const _0x2d6270=_0x4e8c;let _0x146957=_0x10d5be[_0x2d6270(0x20e)][_0x2d6270(0x204)][_0x2d6270(0x215)]['getFramebuffer']();if(!_0x146957)return _0x10d5be[_0x2d6270(0x20e)]['defaultTexture'];return _0x146957['getColorTexture'](0x0);},'uNoiseMap':function(){const _0x55ee5e=_0x4e8c;return _0x10d5be['context'][_0x55ee5e(0x1ea)];},'uTimeVal':function(){const _0x3d8335=_0x4e8c;let _0x490792=_0x10d5be[_0x3d8335(0x1e1)]['timeVal']*0.01;return _0x2cb172[_0x3d8335(0x1e0)]=_0x2cb172['waterTime']>0x1?_0x490792:_0x2cb172[_0x3d8335(0x1e0)]+_0x490792,_0x2cb172[_0x3d8335(0x1e0)];},'uScale':function(){const _0x4023cf=_0x4e8c;return _0x10d5be[_0x4023cf(0x1e1)][_0x4023cf(0x1c7)];},'uScroll':function(){const _0x5ea67c=_0x4e8c;return _0x10d5be[_0x5ea67c(0x1e1)][_0x5ea67c(0x1e3)];},'uNoise':function(){return _0x10d5be['_waterParameters']['noise'];},'uBumpSpeed':function(){const _0x51ce35=_0x4e8c;return _0x10d5be['_waterParameters'][_0x51ce35(0x1ed)];},'uFresnelPower':function(){const _0x5565de=_0x4e8c;return _0x10d5be[_0x5565de(0x1e1)][_0x5565de(0x1fd)];},'uMinFresnel':function(){const _0x5f302d=_0x4e8c;return _0x10d5be[_0x5f302d(0x1e1)][_0x5f302d(0x1c2)];},'uMaxFresnel':function(){const _0x348403=_0x4e8c;return _0x10d5be[_0x348403(0x1e1)]['maxFresnel'];},'uTintColour':function(){return _0x10d5be['_waterParameters']['tintColour'];},'uNoiseScale':function(){const _0x3cff73=_0x4e8c;return _0x10d5be[_0x3cff73(0x1e1)][_0x3cff73(0x212)];},'uWaterColour':function(){const _0x212f0b=_0x4e8c;return _0x10d5be['_waterParameters'][_0x212f0b(0x1e8)];},'uWaterBrightness':function(){const _0x1c25b4=_0x4e8c;return _0x10d5be[_0x1c25b4(0x1e1)]['waterBrightness'];}};}S3MWaterRenderEntity[_0x296303(0x1da)][_0x296303(0x1dc)]=function(){const _0x589787=_0x296303;if(Cesium['defined'](this[_0x589787(0x1fa)])||this[_0x589787(0x202)]['length']!==0x0||this[_0x589787(0x1d7)]['length']!==0x0||this[_0x589787(0x1c6)][_0x589787(0x1fe)]!==0x0)return;let _0x44e62f=this[_0x589787(0x1eb)],_0x31a4cd=_0x44e62f[_0x589787(0x20e)],_0x4268af=this['vertexPackage'],_0x3c5aea=this[_0x589787(0x1d6)],_0x51f835=_0x4268af[_0x589787(0x20c)];if(_0x3c5aea[_0x589787(0x1fe)]<0x1)return;let _0x3bb101=_0x3c5aea[0x0],_0x20e0ba=this['material'];this[_0x589787(0x1f8)]=new Cesium[(_0x589787(0x1fc))]({'context':_0x31a4cd,'attributes':_0x51f835,'indexBuffer':_0x3bb101[_0x589787(0x1ce)]}),this[_0x589787(0x1fa)]=new Cesium[(_0x589787(0x1cd))]({'primitiveType':_0x3bb101[_0x589787(0x211)],'modelMatrix':this['modelMatrix'],'boundingVolume':Cesium[_0x589787(0x20a)][_0x589787(0x20b)](this['boundingVolume']),'vertexArray':this[_0x589787(0x1f8)],'shaderProgram':this['shaderProgram'],'pass':_0x20e0ba[_0x589787(0x205)]?Cesium[_0x589787(0x1f3)][_0x589787(0x1f4)]:Cesium[_0x589787(0x1f3)][_0x589787(0x207)],'renderState':_0x20e0ba[_0x589787(0x205)]?getTransparentRenderState():getOpaqueRenderState(),'instanceCount':_0x4268af[_0x589787(0x217)]});let _0x378ed5=getUniformMap(_0x20e0ba,_0x44e62f,this);this[_0x589787(0x1fa)][_0x589787(0x1cb)]=this[_0x589787(0x1d0)][_0x589787(0x1e6)]()(_0x378ed5),this['vertexPackage']=undefined,this[_0x589787(0x1d6)]=undefined,this['vs']=undefined,this['fs']=undefined,this[_0x589787(0x1c4)]=!![];};function addWaterPlane(_0x268914,_0x27835c){const _0x299ef7=_0x296303;let _0x106c26={'boundingVolume':_0x268914[_0x299ef7(0x1c5)],'distance':_0x27835c[_0x299ef7(0x1d3)][_0x299ef7(0x1e7)]+_0x27835c[_0x299ef7(0x1e1)]['averageHeight']};_0x268914[_0x299ef7(0x1ff)]=_0x27835c[_0x299ef7(0x1c3)](_0x106c26);}S3MWaterRenderEntity[_0x296303(0x1da)]['update']=function(_0x5ba92d,_0x29b371){const _0x3e4c2a=_0x296303;if(_0x5ba92d[_0x3e4c2a(0x1e9)][_0x3e4c2a(0x1df)])return;if(!this[_0x3e4c2a(0x1c4)]){this['createBatchTable'](_0x5ba92d),this[_0x3e4c2a(0x1f0)](),this[_0x3e4c2a(0x213)](_0x5ba92d),this[_0x3e4c2a(0x1cc)](_0x5ba92d),this[_0x3e4c2a(0x1dc)](_0x5ba92d),this[_0x3e4c2a(0x209)](_0x29b371),addWaterPlane(this,_0x29b371);return;}this[_0x3e4c2a(0x1d5)]&&(this[_0x3e4c2a(0x208)](),this[_0x3e4c2a(0x1d5)]=![]),this[_0x3e4c2a(0x1d0)]['update'](_0x5ba92d),_0x5ba92d[_0x3e4c2a(0x1c8)][_0x3e4c2a(0x1ec)](this[_0x3e4c2a(0x1fa)]);},S3MWaterRenderEntity[_0x296303(0x1da)][_0x296303(0x1c1)]=function(){return![];},S3MWaterRenderEntity[_0x296303(0x1da)][_0x296303(0x1e2)]=function(){const _0x469f19=_0x296303;return this[_0x469f19(0x1cf)]=this[_0x469f19(0x1cf)]&&!this['shaderProgram'][_0x469f19(0x1c1)]()&&this['shaderProgram']['destroy'](),this[_0x469f19(0x1f8)]=this['vertexArray']&&!this[_0x469f19(0x1f8)][_0x469f19(0x1c1)]()&&this[_0x469f19(0x1f8)][_0x469f19(0x1e2)](),this[_0x469f19(0x1ee)]=this[_0x469f19(0x1ee)]&&!this[_0x469f19(0x1ee)][_0x469f19(0x1c1)]()&&this[_0x469f19(0x1ee)][_0x469f19(0x1e2)](),this[_0x469f19(0x1d0)]=this[_0x469f19(0x1d0)]&&!this[_0x469f19(0x1d0)][_0x469f19(0x1c1)]()&&this[_0x469f19(0x1d0)]['destroy'](),this[_0x469f19(0x1ff)]>-0x1&&this[_0x469f19(0x1eb)][_0x469f19(0x1f5)](this[_0x469f19(0x1ff)]),this[_0x469f19(0x1fa)]=undefined,this['vertexPackage']=null,this[_0x469f19(0x1d6)]=null,this[_0x469f19(0x214)]=undefined,this[_0x469f19(0x203)]=undefined,this[_0x469f19(0x1d1)]=undefined,this['vs']=undefined,this['fs']=undefined,Cesium[_0x469f19(0x1d2)](this);};export default S3MWaterRenderEntity;