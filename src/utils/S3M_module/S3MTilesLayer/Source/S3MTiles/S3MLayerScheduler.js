const _0x4c40=['updatedVisibilityFrame','_processTiles','parent','contentState','min','selected','_minimumPriority','visible','children','max','foveatedFactor','isRootTile','_cache','selectedFrame','centerZDepth','refines','renderable','257753rrBIAF','MAX_VALUE','lodRangeMode','requestedFrame','defined','_stack','32338JeGstH','103746wumPQP','lodRangeScale','touchedFrame','schedule','length','227314ESsjiy','shouldSelect','distanceToCamera','updatePriority','updateVisibility','depth','push','processFrame','372492bKQbvD','frameNumber','priorityHolder','_rootTiles','wasMinPriorityChild','touch','sort','distance','_maximumPriority','147081jqUKRO','pixel','_requestTiles','91297RwoBwF','pop','lodRangeData','1LGeAIp'];const _0xa5a763=_0x321c;(function(_0x5e8196,_0x23c1e8){const _0x49ab71=_0x321c;while(!![]){try{const _0x19bc9d=-parseInt(_0x49ab71(0x1d9))+-parseInt(_0x49ab71(0x1df))*-parseInt(_0x49ab71(0x1dc))+-parseInt(_0x49ab71(0x1d0))+parseInt(_0x49ab71(0x1f1))+parseInt(_0x49ab71(0x1c2))+parseInt(_0x49ab71(0x1c8))+parseInt(_0x49ab71(0x1c3));if(_0x19bc9d===_0x23c1e8)break;else _0x5e8196['push'](_0x5e8196['shift']());}catch(_0x9c9267){_0x5e8196['push'](_0x5e8196['shift']());}}}(_0x4c40,0x2f16b));import _0x6ce1d2 from'./Enum/ContentState.js';import _0x13c162 from'./Enum/RangeMode.js';function S3MLayerScheduler(){const _0x184b27=_0x321c;this[_0x184b27(0x1c1)]=[];}function sortComparator(_0x4cd4f6,_0x387e65){const _0x1f581e=_0x321c;if(_0x387e65['distanceToCamera']===0x0&&_0x4cd4f6[_0x1f581e(0x1ca)]===0x0)return _0x387e65[_0x1f581e(0x1ee)]-_0x4cd4f6[_0x1f581e(0x1ee)];return _0x387e65[_0x1f581e(0x1ca)]-_0x4cd4f6[_0x1f581e(0x1ca)];}function updateChildren(_0x4d4bb1,_0x18a75a,_0xaa5c52,_0x525ea0){const _0x45d5e6=_0x321c;let _0x456f0b,_0xa84f4=_0x18a75a[_0x45d5e6(0x1e8)],_0x4aca02=_0xa84f4[_0x45d5e6(0x1c7)];for(_0x456f0b=0x0;_0x456f0b<_0x4aca02;++_0x456f0b){updateTile(_0x525ea0,_0x4d4bb1,_0xa84f4[_0x456f0b]);}_0xa84f4[_0x45d5e6(0x1d6)](sortComparator);let _0x310945=!![],_0x75cc51=![],_0x4c8edc=-0x1,_0xd6b4b9=Number[_0x45d5e6(0x1f2)],_0x1ea1a7=!![];for(_0x456f0b=0x0;_0x456f0b<_0x4aca02;++_0x456f0b){let _0x206962=_0xa84f4[_0x456f0b];_0x206962['foveatedFactor']<_0xd6b4b9&&(_0x4c8edc=_0x456f0b,_0xd6b4b9=_0x206962[_0x45d5e6(0x1ea)]);_0x206962[_0x45d5e6(0x1e7)]?(_0xaa5c52['push'](_0x206962),_0x75cc51=!![]):(loadTile(_0x4d4bb1,_0x206962,_0x525ea0),touchTile(_0x4d4bb1,_0x206962,_0x525ea0),processTile(_0x4d4bb1,_0x206962,_0x525ea0));let _0x5e06ab=_0x206962[_0x45d5e6(0x1f0)];_0x1ea1a7&&(_0x310945=_0x310945&&_0x5e06ab);}!_0x75cc51&&(_0x310945=![]);if(_0x4c8edc!==-0x1){let _0xf588d1=_0xa84f4[_0x4c8edc];_0xf588d1['wasMinPriorityChild']=!![];let _0x1b73d2=(_0x18a75a[_0x45d5e6(0x1d4)]||_0x18a75a[_0x45d5e6(0x1eb)])&&_0xd6b4b9<=_0x18a75a[_0x45d5e6(0x1d2)][_0x45d5e6(0x1ea)]?_0x18a75a['priorityHolder']:_0x18a75a;_0x1b73d2[_0x45d5e6(0x1ea)]=Math[_0x45d5e6(0x1e4)](_0xf588d1[_0x45d5e6(0x1ea)],_0x1b73d2[_0x45d5e6(0x1ea)]),_0x1b73d2['distanceToCamera']=Math[_0x45d5e6(0x1e4)](_0xf588d1['distanceToCamera'],_0x1b73d2['distanceToCamera']);for(_0x456f0b=0x0;_0x456f0b<_0x4aca02;++_0x456f0b){let _0x28f24b=_0xa84f4[_0x456f0b];_0x28f24b['priorityHolder']=_0x1b73d2;}}return _0x310945;}function selectTile(_0x372a0a,_0x3c5357,_0x552530){const _0x5d8660=_0x321c;if(_0x3c5357['selectedFrame']===_0x552530['frameNumber']||!_0x3c5357[_0x5d8660(0x1f0)])return;_0x372a0a['_selectedTiles']['push'](_0x3c5357),_0x3c5357[_0x5d8660(0x1ed)]=_0x552530['frameNumber'];}function loadTile(_0x97911a,_0x1fe001,_0xd7fb15){const _0x342853=_0x321c;if(_0x1fe001['requestedFrame']===_0xd7fb15[_0x342853(0x1d1)]||_0x1fe001[_0x342853(0x1e3)]!==_0x6ce1d2['UNLOADED'])return;_0x97911a[_0x342853(0x1db)][_0x342853(0x1ce)](_0x1fe001),_0x1fe001[_0x342853(0x1bf)]=_0xd7fb15[_0x342853(0x1d1)];}function processTile(_0x52a30a,_0x48ad4f,_0x5e241e){const _0x1776d0=_0x321c;if(_0x48ad4f[_0x1776d0(0x1cf)]===_0x5e241e['frameNumber']||_0x48ad4f[_0x1776d0(0x1e3)]!==_0x6ce1d2['READY']||_0x48ad4f[_0x1776d0(0x1f0)])return;_0x48ad4f[_0x1776d0(0x1cf)]=_0x5e241e['frameNumber'],_0x52a30a[_0x1776d0(0x1e1)][_0x1776d0(0x1ce)](_0x48ad4f);}function touchTile(_0x46d198,_0x30de18,_0x1de6f1){const _0x456edf=_0x321c;if(_0x30de18[_0x456edf(0x1c5)]===_0x1de6f1[_0x456edf(0x1d1)])return;_0x46d198[_0x456edf(0x1ec)][_0x456edf(0x1d5)](_0x30de18),_0x30de18['touchedFrame']=_0x1de6f1[_0x456edf(0x1d1)];}function updateVisibility(_0x2b6b3e,_0x59a62c,_0x3fa0e5){const _0x4b18cf=_0x321c;if(_0x59a62c['updatedVisibilityFrame']===_0x3fa0e5[_0x4b18cf(0x1d1)])return;_0x59a62c[_0x4b18cf(0x1e0)]=_0x3fa0e5[_0x4b18cf(0x1d1)],_0x59a62c[_0x4b18cf(0x1cc)](_0x3fa0e5,_0x2b6b3e);}function updateTileVisibility(_0x38fb32,_0x58da64,_0x20f230){updateVisibility(_0x58da64,_0x20f230,_0x38fb32);}function _0x321c(_0x3d90f8,_0x320cdb){_0x3d90f8=_0x3d90f8-0x1be;let _0x4c4090=_0x4c40[_0x3d90f8];return _0x4c4090;}function updateMinimumMaximumPriority(_0x2c5e3c,_0x4eace4){const _0x4a4bf1=_0x321c;_0x2c5e3c[_0x4a4bf1(0x1d8)][_0x4a4bf1(0x1d7)]=Math[_0x4a4bf1(0x1e9)](_0x4eace4['distanceToCamera'],_0x2c5e3c['_maximumPriority']['distance']),_0x2c5e3c[_0x4a4bf1(0x1e6)]['distance']=Math[_0x4a4bf1(0x1e4)](_0x4eace4[_0x4a4bf1(0x1ca)],_0x2c5e3c['_minimumPriority'][_0x4a4bf1(0x1d7)]),_0x2c5e3c[_0x4a4bf1(0x1d8)][_0x4a4bf1(0x1cd)]=Math[_0x4a4bf1(0x1e9)](_0x4eace4[_0x4a4bf1(0x1cd)],_0x2c5e3c['_maximumPriority'][_0x4a4bf1(0x1cd)]),_0x2c5e3c[_0x4a4bf1(0x1e6)][_0x4a4bf1(0x1cd)]=Math[_0x4a4bf1(0x1e4)](_0x4eace4[_0x4a4bf1(0x1cd)],_0x2c5e3c[_0x4a4bf1(0x1e6)][_0x4a4bf1(0x1cd)]),_0x2c5e3c[_0x4a4bf1(0x1d8)][_0x4a4bf1(0x1ea)]=Math[_0x4a4bf1(0x1e9)](_0x4eace4[_0x4a4bf1(0x1ea)],_0x2c5e3c[_0x4a4bf1(0x1d8)][_0x4a4bf1(0x1ea)]),_0x2c5e3c[_0x4a4bf1(0x1e6)][_0x4a4bf1(0x1ea)]=Math[_0x4a4bf1(0x1e4)](_0x4eace4['foveatedFactor'],_0x2c5e3c[_0x4a4bf1(0x1e6)][_0x4a4bf1(0x1ea)]),_0x2c5e3c[_0x4a4bf1(0x1d8)][_0x4a4bf1(0x1da)]=Math[_0x4a4bf1(0x1e9)](_0x4eace4[_0x4a4bf1(0x1da)],_0x2c5e3c['_maximumPriority'][_0x4a4bf1(0x1da)]),_0x2c5e3c[_0x4a4bf1(0x1e6)]['pixel']=Math['min'](_0x4eace4[_0x4a4bf1(0x1da)],_0x2c5e3c[_0x4a4bf1(0x1e6)][_0x4a4bf1(0x1da)]);}function updateTile(_0x263d09,_0x5dff06,_0x150fa3){const _0x49246d=_0x321c;updateTileVisibility(_0x263d09,_0x5dff06,_0x150fa3),_0x150fa3['wasMinPriorityChild']=![],_0x150fa3[_0x49246d(0x1d2)]=_0x150fa3,updateMinimumMaximumPriority(_0x5dff06,_0x150fa3),_0x150fa3[_0x49246d(0x1c9)]=![],_0x150fa3[_0x49246d(0x1e5)]=![];}function canTraverse(_0x29ebee,_0x41d431){const _0x3f6425=_0x321c;if(_0x41d431[_0x3f6425(0x1e8)][_0x3f6425(0x1c7)]===0x0)return![];if(_0x41d431[_0x3f6425(0x1be)]===_0x13c162['Pixel'])return _0x41d431['pixel']/_0x29ebee[_0x3f6425(0x1c4)]>_0x41d431[_0x3f6425(0x1de)];return _0x41d431[_0x3f6425(0x1ca)]*_0x29ebee[_0x3f6425(0x1c4)]<_0x41d431[_0x3f6425(0x1de)];}function traversal(_0x16df4c,_0x251cfb,_0x5674d8){const _0x980d3b=_0x321c;while(_0x251cfb[_0x980d3b(0x1c7)]){let _0x2c687d=_0x251cfb[_0x980d3b(0x1dd)](),_0x52e806=_0x2c687d[_0x980d3b(0x1e2)],_0x2bc679=!Cesium[_0x980d3b(0x1c0)](_0x52e806)||_0x52e806[_0x980d3b(0x1ef)],_0x149695=![];canTraverse(_0x16df4c,_0x2c687d)&&(_0x149695=updateChildren(_0x16df4c,_0x2c687d,_0x251cfb,_0x5674d8)&&_0x2bc679);let _0x40095e=!_0x149695&&_0x2bc679;loadTile(_0x16df4c,_0x2c687d,_0x5674d8),processTile(_0x16df4c,_0x2c687d,_0x5674d8),_0x40095e&&selectTile(_0x16df4c,_0x2c687d,_0x5674d8),touchTile(_0x16df4c,_0x2c687d,_0x5674d8),_0x2c687d['refines']=_0x149695;}}function selectRootTiles(_0x28d3ca,_0x2cbc59,_0x54437d){const _0x46f44d=_0x321c;_0x2cbc59[_0x46f44d(0x1c7)]=0x0;for(let _0x4605a0=0x0,_0xaba146=_0x28d3ca[_0x46f44d(0x1d3)][_0x46f44d(0x1c7)];_0x4605a0<_0xaba146;_0x4605a0++){let _0x427b56=_0x28d3ca[_0x46f44d(0x1d3)][_0x4605a0];updateTile(_0x54437d,_0x28d3ca,_0x427b56);if(!_0x427b56[_0x46f44d(0x1e7)])continue;_0x2cbc59[_0x46f44d(0x1ce)](_0x427b56);}}function updatePriority(_0x5066db,_0x1c53dd){const _0x2f8bec=_0x321c;let _0x231950=_0x5066db[_0x2f8bec(0x1db)],_0x4f07a9=_0x231950[_0x2f8bec(0x1c7)];for(let _0x2c9b04=0x0;_0x2c9b04<_0x4f07a9;++_0x2c9b04){_0x231950[_0x2c9b04][_0x2f8bec(0x1cb)](_0x5066db,_0x1c53dd);}}S3MLayerScheduler['prototype'][_0xa5a763(0x1c6)]=function(_0x2f5001,_0x50d7b4){let _0x1b2a46=this['_stack'];selectRootTiles(_0x2f5001,_0x1b2a46,_0x50d7b4),traversal(_0x2f5001,_0x1b2a46,_0x50d7b4),updatePriority(_0x2f5001,_0x50d7b4);};export default S3MLayerScheduler;