const _0x597c=['name','tile','layer','buffer','head','push','201572KPecqm','then','request','distanceToCamera','when','state','BYTES_PER_ELEMENT','providerName','sort','47113UGjFDk','19537OelbUl','quadKey','Failed','DoublyLinkedList','byteLength','startPackRequest','Ready','keyWord','58628eXqwKn','next','url','.texblock','UnLoad','add','Resource','deferred','getSingleInstance','item','9NpyHlq','cache','pendingRequests','cancelled','2aDkdYV','prototype','resolve','processRequests','prepareRequest','fetchArrayBuffer','_singleInstance','Loading','1apjCmK','106652dKXMSY','promisePack','priority','requestHeapPack','length','Loaded','getUint32','25398rYQfvy','quadKeyIndex','quadKeyPack','join','Request','get','defined','219304XGbmGV','del','list','getStringFromTypedArray','promise'];const _0x56bc94=_0x25c5;(function(_0x3bb5ed,_0x47188a){const _0x7255f6=_0x25c5;while(!![]){try{const _0x8f11de=-parseInt(_0x7255f6(0x99))+parseInt(_0x7255f6(0xd0))+-parseInt(_0x7255f6(0xc9))+-parseInt(_0x7255f6(0xb9))*parseInt(_0x7255f6(0xab))+-parseInt(_0x7255f6(0xc1))*-parseInt(_0x7255f6(0xc2))+-parseInt(_0x7255f6(0xb5))*-parseInt(_0x7255f6(0xa3))+-parseInt(_0x7255f6(0xa2));if(_0x8f11de===_0x47188a)break;else _0x3bb5ed['push'](_0x3bb5ed['shift']());}catch(_0x29c6b0){_0x3bb5ed['push'](_0x3bb5ed['shift']());}}}(_0x597c,0x1af72));import _0x27ead4 from'../ThirdParty/pako_inflate.js';function SubTextureManager(){const _0x15a4b8=_0x25c5;this[_0x15a4b8(0x9e)]={},this[_0x15a4b8(0xb6)]={},this['list']=new Cesium[(_0x15a4b8(0xa6))](),this['pendingRequests']=[],this[_0x15a4b8(0xc3)]={},this[_0x15a4b8(0xcb)]={},this['quadKeyIndexPack']={},this[_0x15a4b8(0xc5)]={};}const _State={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _cacheSize=0x0;const _throttleSize=0xc8*0x400*0x400,_PacketCount=0x14;SubTextureManager[_0x56bc94(0xba)]['prepareRequest']=function(_0xb1099e,_0x54b2d7,_0x568575,_0x5a86dd,_0x4de05d){const _0x339659=_0x56bc94;let _0xe32899=_0xb1099e+'_'+_0x568575,_0xbe9541=_0x54b2d7+_0x568575+_0x339659(0xae),_0x345435=new Cesium[(_0x339659(0xcd))]({'url':_0xbe9541,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){const _0x31c902=_0x339659;return _0x5a86dd[_0x31c902(0x9c)];}});_0x345435[_0x339659(0xa4)]=_0x568575,_0x345435[_0x339659(0xa0)]=_0x4de05d[_0x339659(0x94)][_0x339659(0x95)][_0x339659(0x93)],_0x345435[_0x339659(0xaa)]=_0xe32899,this['pendingRequests'][_0x339659(0x98)](_0x345435);};let comparator=function(_0x45446b,_0x415174){const _0x52aeb5=_0x56bc94;return _0x45446b[_0x52aeb5(0xc4)]-_0x415174['priority'];};SubTextureManager[_0x56bc94(0xba)][_0x56bc94(0xbc)]=function(){const _0x58f878=_0x56bc94;if(this[_0x58f878(0xb7)][_0x58f878(0xc6)]<0x1)return;this[_0x58f878(0xb7)][_0x58f878(0xa1)](comparator),this[_0x58f878(0xa8)]();for(let _0x293180=0x0,_0x1824b6=this['pendingRequests'][_0x58f878(0xc6)];_0x293180<_0x1824b6;_0x293180++){let _0x5be1fd=this[_0x58f878(0xb7)][_0x293180];this[_0x58f878(0x9b)](_0x5be1fd);}this['pendingRequests'][_0x58f878(0xc6)]=0x0;};function combineQuadkey(_0x3ef01a){const _0x2e7b28=_0x56bc94;let _0x33a8aa=[],_0x3e7186={},_0x701840=0x0;for(let _0x159cbf=0x0,_0x168c02=_0x3ef01a[_0x2e7b28(0xc6)];_0x159cbf<_0x168c02;_0x159cbf++){let _0x76a071=_0x3ef01a[_0x159cbf];if(_0x76a071[_0x2e7b28(0xb8)])continue;let _0x41772a=_0x76a071[_0x2e7b28(0xa4)];if(_0x3e7186[_0x41772a])continue;_0x3e7186[_0x41772a]=!![],_0x33a8aa[_0x2e7b28(0x98)](_0x41772a),_0x76a071[_0x2e7b28(0xca)]=_0x701840++;}return _0x33a8aa;}SubTextureManager[_0x56bc94(0xba)]['startPackRequest']=function(){const _0x1fe20b=_0x56bc94;let _0x2f8489=combineQuadkey(this[_0x1fe20b(0xb7)]),_0x35c757=_0x2f8489[_0x1fe20b(0xcc)](';'),_0x536a84=this[_0x1fe20b(0xb7)][0x0][_0x1fe20b(0xad)],_0x56f4a3=new Cesium[(_0x1fe20b(0xb1))]({'url':_0x536a84,'queryParameters':{'extratiles':_0x35c757}}),_0x26015c=Cesium[_0x1fe20b(0x9d)]['defer'](),_0x46e945=_0x56f4a3[_0x1fe20b(0xbe)]();if(!_0x46e945)return;for(let _0x594a7e=0x0,_0x15b035=this[_0x1fe20b(0xb7)][_0x1fe20b(0xc6)];_0x594a7e<_0x15b035;_0x594a7e++){let _0x1fe940=this[_0x1fe20b(0xb7)][_0x594a7e];_0x1fe940[_0x1fe20b(0xb2)]=_0x26015c;}_0x46e945[_0x1fe20b(0x9a)](function(_0x90155){const _0xda1add=_0x1fe20b;_0x26015c[_0xda1add(0xbb)](_0x90155);})['otherwise'](function(_0xd688cf){_0x26015c['reject'](_0xd688cf);});};function decodePackedBuffer(_0x52d44e,_0x1da212){const _0x8a81d7=_0x56bc94;let _0x26324d=new DataView(_0x52d44e),_0x11287c=0x0,_0x3abd21=_0x26324d['getUint32'](_0x11287c,!![]);if(_0x1da212>_0x3abd21-0x1||_0x3abd21>0x100)return undefined;_0x11287c+=0x4;let _0x346d0d=[],_0x38d850,_0x4c911c;for(_0x38d850=0x0;_0x38d850<_0x3abd21;_0x38d850++){_0x4c911c=_0x26324d['getUint32'](_0x11287c,!![]),_0x346d0d[_0x8a81d7(0x98)](_0x4c911c),_0x11287c+=0x4;}for(_0x38d850=0x0;_0x38d850<_0x3abd21;_0x38d850++){_0x4c911c=_0x346d0d[_0x38d850];if(_0x38d850===_0x1da212){if(_0x4c911c===0x0)return;return new Uint8Array(_0x52d44e)['slice'](_0x11287c,_0x11287c+_0x4c911c)[_0x8a81d7(0x96)];}_0x11287c+=_0x4c911c;}return undefined;}SubTextureManager[_0x56bc94(0xba)]['request']=function(_0x24793d){const _0x450e59=_0x56bc94;let _0x3e4e56=_0x24793d[_0x450e59(0xaa)],_0x2cbdec=_0x24793d[_0x450e59(0xb2)][_0x450e59(0xd4)];this[_0x450e59(0x9e)][_0x3e4e56]=_State[_0x450e59(0xc0)];let _0x814ba5=this;_0x2cbdec[_0x450e59(0x9a)](function(_0x35fe0c){const _0x1657e8=_0x450e59;if(!Cesium[_0x1657e8(0xcf)](_0x814ba5[_0x1657e8(0x9e)][_0x3e4e56]))return;_0x814ba5[_0x1657e8(0x9e)][_0x3e4e56]=_State[_0x1657e8(0xc7)];let _0x5a51fe=decodePackedBuffer(_0x35fe0c,_0x24793d[_0x1657e8(0xca)]);if(!_0x5a51fe){_0x814ba5[_0x1657e8(0x9e)][_0x3e4e56]=_State[_0x1657e8(0xa5)];return;}let _0x1ed8e0=new Uint8Array(_0x5a51fe),_0x439b1f=new DataView(_0x5a51fe),_0x10032d=0x0,_0x44e9c5=_0x439b1f[_0x1657e8(0xc8)](_0x10032d,!![]);_0x10032d+=Uint32Array[_0x1657e8(0x9f)];let _0x5ae000={};for(let _0x3d4c89=0x0;_0x3d4c89<_0x44e9c5;_0x3d4c89++){let _0x1671ec=_0x439b1f[_0x1657e8(0xc8)](_0x10032d,!![]);_0x10032d+=Uint32Array[_0x1657e8(0x9f)];let _0xb887bc=Cesium[_0x1657e8(0xd3)](_0x1ed8e0,_0x10032d,_0x1671ec);_0x10032d+=_0x1671ec;let _0x22d494=_0x439b1f[_0x1657e8(0xc8)](_0x10032d,!![]);_0x10032d+=Uint32Array[_0x1657e8(0x9f)];let _0x477f12=_0x439b1f[_0x1657e8(0xc8)](_0x10032d,!![]);_0x10032d+=Uint32Array[_0x1657e8(0x9f)];let _0x312f19=new Uint8Array(_0x5a51fe,_0x10032d,_0x477f12),_0x4466df=_0x27ead4['inflate'](_0x312f19)['buffer'];_0x10032d+=_0x477f12;let _0x35a92f=new DataView(_0x4466df),_0x1d8a4c=0x0,_0x582d5c=_0x35a92f[_0x1657e8(0xc8)](_0x1d8a4c,!![]);_0x1d8a4c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x36e780=_0x35a92f[_0x1657e8(0xc8)](_0x1d8a4c,!![]);_0x1d8a4c+=Uint32Array[_0x1657e8(0x9f)];let _0xe4c03b=_0x35a92f[_0x1657e8(0xc8)](_0x1d8a4c,!![]);_0x1d8a4c+=Uint32Array[_0x1657e8(0x9f)];let _0x35229b=_0x35a92f['getUint32'](_0x1d8a4c,!![]);_0x1d8a4c+=Uint32Array[_0x1657e8(0x9f)];let _0x3b79d7=_0x35a92f['getUint32'](_0x1d8a4c,!![]);_0x1d8a4c+=Uint32Array['BYTES_PER_ELEMENT'];let _0x1b35a2=new Uint8Array(_0x4466df,_0x1d8a4c,_0x3b79d7);_0x5ae000[_0xb887bc]={'width':_0x36e780,'height':_0xe4c03b,'arrayBufferView':_0x1b35a2};}let _0x1c255f={'keyWord':_0x3e4e56,'result':_0x5ae000,'byteLength':_0x5a51fe['byteLength']},_0x5eb4b4=_0x814ba5['list'][_0x1657e8(0xb0)](_0x1c255f);_0x814ba5[_0x1657e8(0xb6)][_0x3e4e56]=_0x5eb4b4,_0x814ba5[_0x1657e8(0x9e)][_0x3e4e56]=_State[_0x1657e8(0xa9)],delete _0x814ba5[_0x1657e8(0x9e)][_0x3e4e56],_cacheSize+=_0x5a51fe[_0x1657e8(0xa7)];let _0x423ff5=_0x814ba5[_0x1657e8(0xd2)][_0x1657e8(0x97)];while(_cacheSize>_throttleSize){let _0x2329eb=_0x423ff5[_0x1657e8(0xb4)],_0x14c3a8=_0x423ff5,_0xbdf46=_0x2329eb[_0x1657e8(0xaa)],_0x36e81f=_0x814ba5['cache'][_0xbdf46],_0x2e965a=_0x36e81f[_0x1657e8(0xb4)];_cacheSize-=_0x2e965a[_0x1657e8(0xa7)],delete _0x814ba5[_0x1657e8(0xb6)][_0xbdf46],_0x423ff5=_0x423ff5[_0x1657e8(0xac)],_0x814ba5[_0x1657e8(0xd2)]['remove'](_0x14c3a8);}},function(_0x205c9a){const _0x406c58=_0x450e59;_0x814ba5[_0x406c58(0x9e)][_0x3e4e56]=_0x205c9a?_State['Failed']:_State[_0x406c58(0xaf)];});},SubTextureManager[_0x56bc94(0xba)][_0x56bc94(0xce)]=function(_0x451aa5,_0x129411,_0x298b1d,_0x1b7428){const _0x2ea503=_0x56bc94;let _0xf60281=_0x451aa5+'_'+_0x298b1d,_0x4578be=this[_0x2ea503(0xb6)][_0xf60281];if(_0x4578be)return this['list']['splice'](this[_0x2ea503(0xd2)]['tail'],_0x4578be),_0x4578be[_0x2ea503(0xb4)];let _0xbff48d=this[_0x2ea503(0x9e)][_0xf60281];return!Cesium[_0x2ea503(0xcf)](_0xbff48d)&&(_0xbff48d=this[_0x2ea503(0x9e)][_0xf60281]=_State[_0x2ea503(0xaf)]),_0xbff48d===_State['UnLoad']&&this[_0x2ea503(0xbd)](_0x451aa5,_0x129411,_0x298b1d,_0x1b7428[_0x2ea503(0x94)],_0x1b7428),undefined;},SubTextureManager['prototype'][_0x56bc94(0xd1)]=function(_0x356a1a,_0x82b8fb){const _0x349871=_0x56bc94;let _0x2e1ccf=_0x356a1a+'_'+_0x82b8fb;delete this[_0x349871(0x9e)][_0x2e1ccf];},SubTextureManager[_0x56bc94(0xbf)]=undefined,SubTextureManager[_0x56bc94(0xb3)]=function(){const _0x2591a2=_0x56bc94;return!SubTextureManager[_0x2591a2(0xbf)]&&(SubTextureManager[_0x2591a2(0xbf)]=new SubTextureManager()),SubTextureManager[_0x2591a2(0xbf)];};function _0x25c5(_0x460328,_0x5c76e8){_0x460328=_0x460328-0x93;let _0x597cd5=_0x597c[_0x460328];return _0x597cd5;}export default SubTextureManager;