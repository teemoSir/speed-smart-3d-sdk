const _0x19e9=['fileType','byteLength','unpack','clone','create','5jfcWzC','bTransparentSorting','multiplyByScalar','_materialManager','3kuvsAC','addressmode','vertCompressConstant','188171albwSP','getSingleInstance','pageLods','typedArray','edgeGeometry','multiply','165449HNBJbU','Color','parse','fromPoints','CLAMP_TO_EDGE','center','add','textureunitstate','1042042cpMiAY','matrix','boundingVolume','REPEAT','createTexture','vertexAttributes','textureunitstates','texmodmatrix','_subTextureManager','lerp','sphere','geoMap','compressOptions','instanceBounds','radius','push','rangeDataList','minVerticesValue','texturePackage','TextureWrap','rangeMode','modelMatrix','instanceIndex','diffuseColor','wrapS','specularColor','rangeList','421510YYSIKG','shininess','materialCode','12XbMCoL','materials','componentsPerAttribute','keys','SVC_Vertex','defined','transparentsorting','39972NwVBjr','BoundingSphere','geodes','boundingSphere','Carteisan3','length','skeletonNames','Cartesian3','1127536RYMkeK','Matrix4','groupNode','hasOwnProperty','wrapT','746298ptoHUi','buffer','isLeafTile','material'];const _0x2b7af6=_0x2265;(function(_0x57418b,_0x18ecd0){const _0x3f5e16=_0x2265;while(!![]){try{const _0x36c3b2=parseInt(_0x3f5e16(0x187))+parseInt(_0x3f5e16(0x16c))+parseInt(_0x3f5e16(0x15b))*-parseInt(_0x3f5e16(0x15e))+-parseInt(_0x3f5e16(0x157))*parseInt(_0x3f5e16(0x191))+parseInt(_0x3f5e16(0x19e))+parseInt(_0x3f5e16(0x199))+-parseInt(_0x3f5e16(0x18a))*parseInt(_0x3f5e16(0x164));if(_0x36c3b2===_0x18ecd0)break;else _0x57418b['push'](_0x57418b['shift']());}catch(_0x2ef490){_0x57418b['push'](_0x57418b['shift']());}}}(_0x19e9,0x8f769));import _0xdb9016 from'./DDSTexture.js';import _0x435e57 from'./MaterialPass.js';import _0x4fcc00 from'./Factory/S3MContentFactory.js';import _0x302a0b from'./Enum/VertexCompressOption.js';import _0x511784 from'./MaterialManager.js';import _0x4134f6 from'./SubTextureManager.js';function S3MBlockContentParser(){}function parseMaterial(_0x198a3d,_0x1b2ee3,_0x472c4e){const _0x494299=_0x2265;let _0x514337=_0x198a3d['context'],_0x1a8ab6=_0x198a3d[_0x494299(0x15a)];!_0x1a8ab6&&(_0x1a8ab6=_0x198a3d['_materialManager']=new _0x511784());let _0x567d16=_0x198a3d[_0x494299(0x174)];!_0x198a3d['_subTextureManager']&&(_0x198a3d[_0x494299(0x174)]=_0x4134f6[_0x494299(0x15f)]());let _0x3a76f0=_0x1b2ee3[_0x494299(0x18b)][_0x494299(0x1a1)];for(let _0x1529af=0x0,_0x37c11f=_0x3a76f0[_0x494299(0x196)];_0x1529af<_0x37c11f;_0x1529af++){let _0x842997=_0x3a76f0[_0x1529af][_0x494299(0x1a1)],_0x275514=_0x842997['id'],_0x24ed2a=_0x1a8ab6[_0x494299(0x156)](_0x275514);_0x24ed2a['layerId']=_0x198a3d['id'],_0x24ed2a['tile']=_0x472c4e;let _0xe9d59=_0x842997['ambient'];_0x24ed2a['ambientColor']=new Cesium[(_0x494299(0x165))](_0xe9d59['r'],_0xe9d59['g'],_0xe9d59['b'],_0xe9d59['a']);let _0x465844=_0x842997['diffuse'];_0x24ed2a[_0x494299(0x183)]=new Cesium[(_0x494299(0x165))](_0x465844['r'],_0x465844['g'],_0x465844['b'],_0x465844['a']);let _0x3a4fc9=_0x842997['specular'];_0x24ed2a[_0x494299(0x185)]=new Cesium[(_0x494299(0x165))](_0x3a4fc9['r'],_0x3a4fc9['g'],_0x3a4fc9['b'],_0x3a4fc9['a']),_0x24ed2a[_0x494299(0x188)]=_0x842997[_0x494299(0x188)],_0x24ed2a[_0x494299(0x158)]=_0x842997[_0x494299(0x190)],_0x24ed2a['id']=_0x275514;let _0x226649=_0x842997[_0x494299(0x172)],_0x49984e=_0x226649[_0x494299(0x196)];for(let _0x35c72b=0x0;_0x35c72b<0x1;_0x35c72b++){let _0x5cc3ab=_0x226649[_0x35c72b][_0x494299(0x16b)],_0x4f0759=_0x5cc3ab['id'],_0x3278d7=_0x5cc3ab[_0x494299(0x15c)]['u']===0x0?Cesium[_0x494299(0x17f)][_0x494299(0x16f)]:Cesium[_0x494299(0x17f)][_0x494299(0x168)],_0x171d72=_0x5cc3ab[_0x494299(0x15c)]['v']===0x0?Cesium['TextureWrap'][_0x494299(0x16f)]:Cesium[_0x494299(0x17f)][_0x494299(0x168)];_0x24ed2a['texMatrix']=Cesium[_0x494299(0x19a)][_0x494299(0x154)](_0x5cc3ab[_0x494299(0x173)]);let _0x215d44=_0x1b2ee3[_0x494299(0x17e)][_0x4f0759];_0x215d44&&(_0x215d44[_0x494299(0x184)]=_0x3278d7,_0x215d44[_0x494299(0x19d)]=_0x171d72,_0x24ed2a[_0x494299(0x170)](_0x198a3d,_0x472c4e,_0x215d44,_0x35c72b,_0x1b2ee3));}}}function calcBoundingVolumeForNormal(_0x5603a4,_0x555373){const _0x5711f3=_0x2265;let _0xbfc4b0=new Cesium[(_0x5711f3(0x192))](),_0x44f701=new Cesium['Cartesian3'](),_0x430009=_0x5603a4[_0x5711f3(0x171)][0x0],_0x10832d=_0x430009[_0x5711f3(0x18c)],_0x5382cb=Cesium[_0x5711f3(0x18f)](_0x5603a4['compressOptions'])&&(_0x5603a4[_0x5711f3(0x178)]&_0x302a0b[_0x5711f3(0x18e)])===_0x302a0b['SVC_Vertex'],_0x55b118=0x1,_0x4e4afd,_0x44ce49;_0x5382cb?(_0x55b118=_0x5603a4[_0x5711f3(0x15d)],_0x4e4afd=new Cesium['Cartesian3'](_0x5603a4[_0x5711f3(0x17d)]['x'],_0x5603a4['minVerticesValue']['y'],_0x5603a4['minVerticesValue']['z']),_0x44ce49=new Uint16Array(_0x430009[_0x5711f3(0x161)][_0x5711f3(0x19f)],_0x430009[_0x5711f3(0x161)]['byteOffset'],_0x430009[_0x5711f3(0x161)]['byteLength']/0x2)):_0x44ce49=new Float32Array(_0x430009[_0x5711f3(0x161)][_0x5711f3(0x19f)],_0x430009[_0x5711f3(0x161)]['byteOffset'],_0x430009[_0x5711f3(0x161)][_0x5711f3(0x1a3)]/0x4);let _0x5e76ff=[];for(let _0x57ecca=0x0;_0x57ecca<_0x5603a4['verticesCount'];_0x57ecca++){Cesium[_0x5711f3(0x198)]['fromArray'](_0x44ce49,_0x10832d*_0x57ecca,_0x44f701),_0x5382cb&&(_0x44f701=Cesium[_0x5711f3(0x198)][_0x5711f3(0x159)](_0x44f701,_0x55b118,_0x44f701),_0x44f701=Cesium[_0x5711f3(0x198)][_0x5711f3(0x16a)](_0x44f701,_0x4e4afd,_0x44f701)),_0x5e76ff[_0x5711f3(0x17b)](Cesium[_0x5711f3(0x198)][_0x5711f3(0x155)](_0x44f701));}return Cesium[_0x5711f3(0x192)][_0x5711f3(0x167)](_0x5e76ff,_0xbfc4b0),Cesium[_0x5711f3(0x192)]['transform'](_0xbfc4b0,_0x555373,_0xbfc4b0),_0x5e76ff[_0x5711f3(0x196)]=0x0,_0xbfc4b0;}let scratchCenter=new Cesium[(_0x2b7af6(0x198))]();function calcBoundingVolumeForInstance(_0x2c0119){const _0xb2f7ec=_0x2b7af6;let _0x1ffa48=new Cesium[(_0xb2f7ec(0x192))](),_0x51362b=_0x2c0119[_0xb2f7ec(0x179)];if(!Cesium[_0xb2f7ec(0x18f)](_0x51362b))return _0x1ffa48;let _0x5ad514=new Cesium[(_0xb2f7ec(0x198))](_0x51362b[0x0],_0x51362b[0x1],_0x51362b[0x2]),_0x219aa3=new Cesium[(_0xb2f7ec(0x195))](_0x51362b[0x3],_0x51362b[0x4],_0x51362b[0x5]),_0x4936a5=new Cesium[(_0xb2f7ec(0x198))][(_0xb2f7ec(0x175))](_0x5ad514,_0x219aa3,0.5,scratchCenter),_0x12c788=new Cesium[(_0xb2f7ec(0x198))]['distance'](_0x4936a5,_0x5ad514);return _0x1ffa48[_0xb2f7ec(0x169)]=_0x4936a5,_0x1ffa48['radius']=_0x12c788,_0x1ffa48;}function calcBoundingVolume(_0x1563d4,_0xcdb2c1){const _0x51f887=_0x2b7af6;if(_0x1563d4[_0x51f887(0x182)]>-0x1)return calcBoundingVolumeForInstance(_0x1563d4);return calcBoundingVolumeForNormal(_0x1563d4,_0xcdb2c1);}function parseGeodes(_0x1abec4,_0x40e9e9,_0x3ddb7c,_0x307b35){const _0x463079=_0x2b7af6;let _0x518d1f={},_0x4d2ae8=_0x3ddb7c[_0x463079(0x193)];for(let _0x362a45=0x0,_0x48d9ac=_0x4d2ae8['length'];_0x362a45<_0x48d9ac;_0x362a45++){let _0x3b4319=_0x4d2ae8[_0x362a45],_0x2c1b46=_0x3b4319[_0x463079(0x16d)],_0x49ad82=Cesium['Matrix4'][_0x463079(0x163)](_0x1abec4[_0x463079(0x181)],_0x2c1b46,new Cesium['Matrix4']()),_0x4beb6c;Cesium['defined'](_0x307b35[_0x463079(0x16e)])&&(_0x4beb6c=new Cesium['BoundingSphere'](_0x307b35[_0x463079(0x16e)][_0x463079(0x176)]['center'],_0x307b35[_0x463079(0x16e)][_0x463079(0x176)]['radius']),Cesium[_0x463079(0x192)]['transform'](_0x4beb6c,_0x1abec4['modelMatrix'],_0x4beb6c));let _0x4aaa49=_0x3b4319[_0x463079(0x197)];for(let _0x56d446=0x0,_0x593c3a=_0x4aaa49[_0x463079(0x196)];_0x56d446<_0x593c3a;_0x56d446++){let _0x59c4cc=_0x4aaa49[_0x56d446],_0x2eb223=_0x40e9e9['geoPackage'][_0x59c4cc],_0x1718cd=_0x2eb223['vertexPackage'],_0x554a95=_0x2eb223['arrIndexPackage'],_0x340f2f=_0x2eb223['pickInfo'],_0x3d63e4;_0x554a95['length']>0x0&&(_0x3d63e4=_0x1abec4[_0x463079(0x15a)][_0x463079(0x156)](_0x554a95[0x0][_0x463079(0x189)]));let _0x48e3e4=Cesium[_0x463079(0x18f)](_0x4beb6c)?_0x4beb6c:calcBoundingVolume(_0x1718cd,_0x49ad82);_0x518d1f[_0x59c4cc]=_0x4fcc00[_0x1abec4[_0x463079(0x1a2)]]({'layer':_0x1abec4,'vertexPackage':_0x1718cd,'arrIndexPackage':_0x554a95,'pickInfo':_0x340f2f,'modelMatrix':_0x49ad82,'geoMatrix':_0x2c1b46,'boundingVolume':_0x48e3e4,'material':_0x3d63e4,'edgeGeometry':_0x2eb223[_0x463079(0x162)],'geoName':_0x59c4cc});}}if(Object[_0x463079(0x18d)](_0x518d1f)[_0x463079(0x196)]<0x1)return;if(!Cesium['defined'](_0x307b35['boundingVolume'])){let _0x205339=[];for(let _0x3e2eb7 in _0x518d1f){_0x518d1f[_0x463079(0x19c)](_0x3e2eb7)&&_0x205339[_0x463079(0x17b)](_0x518d1f[_0x3e2eb7][_0x463079(0x16e)]);}let _0x5bb8f0=Cesium[_0x463079(0x192)]['fromBoundingSpheres'](_0x205339);_0x307b35[_0x463079(0x16e)]={'sphere':_0x5bb8f0};}_0x307b35[_0x463079(0x177)]=_0x518d1f;}function _0x2265(_0x25adc4,_0x393bb9){_0x25adc4=_0x25adc4-0x154;let _0x19e943=_0x19e9[_0x25adc4];return _0x19e943;}function parsePagelods(_0x469ce7,_0x54ee92){const _0x56a5b6=_0x2b7af6;let _0x46e219=_0x54ee92[_0x56a5b6(0x19b)],_0x5a2c0c=[];for(let _0x526080=0x0,_0x713d29=_0x46e219[_0x56a5b6(0x160)][_0x56a5b6(0x196)];_0x526080<_0x713d29;_0x526080++){let _0x842d77={},_0x492af9=_0x46e219[_0x56a5b6(0x160)][_0x526080];_0x842d77[_0x56a5b6(0x180)]=_0x492af9[_0x56a5b6(0x180)],_0x842d77[_0x56a5b6(0x17c)]=_0x492af9['childTile'],_0x842d77[_0x56a5b6(0x186)]=_0x492af9['rangeList'];let _0x19b265=_0x492af9[_0x56a5b6(0x194)]['center'],_0x1d092e=_0x492af9[_0x56a5b6(0x194)][_0x56a5b6(0x17a)];_0x842d77[_0x56a5b6(0x17c)]!==''?_0x842d77['boundingVolume']={'sphere':{'center':new Cesium[(_0x56a5b6(0x198))](_0x19b265['x'],_0x19b265['y'],_0x19b265['z']),'radius':_0x1d092e}}:_0x842d77[_0x56a5b6(0x1a0)]=!![],parseGeodes(_0x469ce7,_0x54ee92,_0x492af9,_0x842d77),Cesium['defined'](_0x842d77['geoMap'])&&_0x5a2c0c[_0x56a5b6(0x17b)](_0x842d77);}return _0x5a2c0c;}S3MBlockContentParser[_0x2b7af6(0x166)]=function(_0x59fec9,_0x190c3b,_0x22d1b1){const _0x169147=_0x2b7af6;if(!Cesium[_0x169147(0x18f)](_0x22d1b1))return;parseMaterial(_0x59fec9,_0x22d1b1,_0x190c3b);let _0x56f8f7=parsePagelods(_0x59fec9,_0x22d1b1);return _0x56f8f7;};export default S3MBlockContentParser;