const _0x5d68=['Color','UNSIGNED_BYTE','3951UOdDCF','height','185duAvZP','31487lepJou','RGBA','clone','createViewportQuadCommand','8133LCcoOb','650753DOBNUl','PixelDatatype','destroy','fromCache','71hESycL','create','TextureMagnificationFilter','sceneFramebuffer','345287iFVPUP','isDestroyed','view','frameState','_updateFramebuffer','59553eEJRBE','clearCommand','end','environmentVisible','depthTextureToCopy','TextureWrap','viewport','context','isUpdate','prototype','getFramebuffer','framebuffer','passes','73799ZQalsu','_hdr','begin','passState','width','Sampler','SceneFramebuffer','TextureMinificationFilter','endFunc','beginFunc','3jqLQbj','RenderState','19kOpjAD','10vgHCnf','vertexArray','pick','depthStencilTexture','execute','_updateCopyCommand','Texture','depth','Framebuffer','depthTexture','constructor','copyDepthCommand','CLAMP_TO_EDGE','PixelFormat','BoundingRectangle','renderState'];const _0x201e78=_0x5a7d;(function(_0x75227,_0x25fbdc){const _0x2b333e=_0x5a7d;while(!![]){try{const _0xf53992=parseInt(_0x2b333e(0x18f))*-parseInt(_0x2b333e(0x191))+parseInt(_0x2b333e(0x19b))*-parseInt(_0x2b333e(0x196))+parseInt(_0x2b333e(0x1be))*parseInt(_0x2b333e(0x1b1))+-parseInt(_0x2b333e(0x19f))+parseInt(_0x2b333e(0x1a4))+-parseInt(_0x2b333e(0x1bd))*parseInt(_0x2b333e(0x192))+-parseInt(_0x2b333e(0x197))*-parseInt(_0x2b333e(0x1bb));if(_0xf53992===_0x25fbdc)break;else _0x75227['push'](_0x75227['shift']());}catch(_0x354355){_0x75227['push'](_0x75227['shift']());}}}(_0x5d68,0x798dc));function _0x5a7d(_0x13d881,_0x16610c){_0x13d881=_0x13d881-0x185;let _0x5d684b=_0x5d68[_0x13d881];return _0x5d684b;}import _0x3e3ae0 from'./RenderTarget.js';function DepthFramebuffer(_0x28a227){const _0x512c55=_0x5a7d;this[_0x512c55(0x1ab)]=_0x28a227,this[_0x512c55(0x19e)]=new Cesium[(_0x512c55(0x1b7))](),this[_0x512c55(0x1b4)]=new Cesium['PassState'](_0x28a227),this['passState'][_0x512c55(0x1aa)]=new Cesium['BoundingRectangle'](),this[_0x512c55(0x1a7)]={'isSunVisible':![],'isMoonVisible':![],'isSkyAtmosphereVisible':![],'isSkyBoxVisible':![],'isGlobalVisible':!![],'isObjectVisible':!![]},this[_0x512c55(0x1b5)]=0x0,this['height']=0x0,this[_0x512c55(0x188)]=undefined,this[_0x512c55(0x1a5)]=undefined,this[_0x512c55(0x1af)]=undefined,this['depthTextureToCopy']=undefined,this['rs']=undefined,this[_0x512c55(0x186)]=undefined,this[_0x512c55(0x1af)]=undefined,this['isUpdate']=![];}DepthFramebuffer['prototype']=Object[_0x201e78(0x19c)](_0x3e3ae0[_0x201e78(0x1ad)]),DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x187)]=_0x3e3ae0,DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x1a3)]=function(_0x4921d9){const _0x35a807=_0x201e78;let _0x4b6342=_0x4921d9['drawingBufferWidth'],_0x7c6e9e=_0x4921d9['drawingBufferHeight'];(!this[_0x35a807(0x1af)]||this[_0x35a807(0x1b5)]!==_0x4b6342||this[_0x35a807(0x190)]!==_0x7c6e9e)&&(this['width']=_0x4b6342,this[_0x35a807(0x190)]=_0x7c6e9e,this[_0x35a807(0x186)]=this[_0x35a807(0x186)]&&!this['depthTexture'][_0x35a807(0x1a0)]()&&this[_0x35a807(0x186)]['destroy'](),this[_0x35a807(0x186)]=new Cesium[(_0x35a807(0x1c4))]({'context':_0x4921d9,'width':_0x4b6342,'height':_0x7c6e9e,'pixelFormat':Cesium[_0x35a807(0x18a)][_0x35a807(0x193)],'pixelDatatype':Cesium[_0x35a807(0x198)][_0x35a807(0x18e)],'sampler':new Cesium[(_0x35a807(0x1b6))]({'wrapS':Cesium['TextureWrap'][_0x35a807(0x189)],'wrapT':Cesium[_0x35a807(0x1a9)]['CLAMP_TO_EDGE'],'minificationFilter':Cesium[_0x35a807(0x1b8)]['NEAREST'],'magnificationFilter':Cesium[_0x35a807(0x19d)]['NEAREST']})}),this[_0x35a807(0x1af)]=this['framebuffer']&&!this[_0x35a807(0x1af)][_0x35a807(0x1a0)]()&&this[_0x35a807(0x1af)][_0x35a807(0x199)](),this[_0x35a807(0x1af)]=new Cesium[(_0x35a807(0x185))]({'context':_0x4921d9,'colorTextures':[this[_0x35a807(0x186)]],'destroyAttachments':![]}));},DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x1c3)]=function(_0x55f259){const _0x57ea9f=_0x201e78;(!this['rs']||!Cesium[_0x57ea9f(0x18b)]['equals'](this['passState'][_0x57ea9f(0x1aa)],this['rs'][_0x57ea9f(0x1aa)]))&&(this['rs']=Cesium[_0x57ea9f(0x1bc)][_0x57ea9f(0x19a)]({'viewport':this['passState'][_0x57ea9f(0x1aa)]}));if(!this[_0x57ea9f(0x188)]){let _0x2cfd1f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20u_depthTexture;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_textureCoordinates;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20czm_packDepth(texture2D(u_depthTexture,\x20v_textureCoordinates).r);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';this[_0x57ea9f(0x188)]=_0x55f259[_0x57ea9f(0x195)](_0x2cfd1f,{'uniformMap':{'u_depthTexture':()=>{const _0x36f46e=_0x57ea9f;return this[_0x36f46e(0x1a8)];}},'owner':this});}!this['clearCommand']&&(this['clearCommand']=new Cesium['ClearCommand']({'color':new Cesium[(_0x57ea9f(0x18d))](0x0,0x0,0x0,0x0),'stencil':0x0,'depth':0x1,'owner':this})),this[_0x57ea9f(0x188)][_0x57ea9f(0x18c)]=this['rs'],this[_0x57ea9f(0x188)][_0x57ea9f(0x1af)]=this['framebuffer'],this[_0x57ea9f(0x1a5)][_0x57ea9f(0x1af)]=this['framebuffer'];},DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x1b3)]=function(_0x88ffbb){const _0x3f5932=_0x201e78;this[_0x3f5932(0x19e)]['update'](_0x88ffbb[_0x3f5932(0x1ab)],_0x88ffbb[_0x3f5932(0x1a1)][_0x3f5932(0x1aa)],_0x88ffbb[_0x3f5932(0x1b2)]),this[_0x3f5932(0x1b4)][_0x3f5932(0x1af)]=this['sceneFramebuffer'][_0x3f5932(0x1ae)](),Cesium[_0x3f5932(0x18b)][_0x3f5932(0x194)](_0x88ffbb[_0x3f5932(0x1a1)][_0x3f5932(0x1aa)],this[_0x3f5932(0x1b4)][_0x3f5932(0x1aa)]);let _0x520811=_0x88ffbb['context'];return this['_updateFramebuffer'](_0x520811),this[_0x3f5932(0x1c3)](_0x520811),this['clearCommand'][_0x3f5932(0x1c2)](_0x520811,this[_0x3f5932(0x1b4)]),_0x88ffbb[_0x3f5932(0x1a2)][_0x3f5932(0x1b0)]['depth']=!![],this['beginFunc']&&this[_0x3f5932(0x1ba)](_0x88ffbb[_0x3f5932(0x1a2)]),this['passState'];},DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x1a6)]=function(_0x4b1754,_0x4a070a){const _0x3318d2=_0x201e78;_0x4b1754[_0x3318d2(0x1b0)][_0x3318d2(0x1c0)]=![],_0x4b1754[_0x3318d2(0x1b0)][_0x3318d2(0x1c5)]=![],this[_0x3318d2(0x1b9)]&&this[_0x3318d2(0x1b9)](_0x4b1754),this[_0x3318d2(0x1a8)]=_0x4a070a[_0x3318d2(0x1af)][_0x3318d2(0x1c1)],this['copyDepthCommand']&&this[_0x3318d2(0x188)][_0x3318d2(0x1c2)](_0x4b1754[_0x3318d2(0x1ab)],_0x4a070a);},DepthFramebuffer[_0x201e78(0x1ad)][_0x201e78(0x1a0)]=function(){return![];},DepthFramebuffer[_0x201e78(0x1ad)]['destroy']=function(){const _0x5957b4=_0x201e78;this[_0x5957b4(0x186)]=this[_0x5957b4(0x186)]&&!this[_0x5957b4(0x186)][_0x5957b4(0x1a0)]()&&this[_0x5957b4(0x186)][_0x5957b4(0x199)](),this[_0x5957b4(0x1af)]=this[_0x5957b4(0x1af)]&&!this[_0x5957b4(0x1af)][_0x5957b4(0x1a0)]()&&this['framebuffer'][_0x5957b4(0x199)]();if(this['copyDepthCommand']){let _0x4d9fa6=this['copyDepthCommand']['sp'];_0x4d9fa6=_0x4d9fa6&&!_0x4d9fa6[_0x5957b4(0x1a0)]()&&_0x4d9fa6['destroy']();let _0x3c98df=this[_0x5957b4(0x188)][_0x5957b4(0x1bf)];_0x3c98df=_0x3c98df&&!_0x3c98df['isDestroyed']()&&_0x3c98df['destroy'](),this[_0x5957b4(0x188)]=undefined;}return this[_0x5957b4(0x1a5)]=undefined,this[_0x5957b4(0x1a8)]=undefined,this[_0x5957b4(0x1ac)]=![],Cesium['destroyObject'](this);};export default DepthFramebuffer;